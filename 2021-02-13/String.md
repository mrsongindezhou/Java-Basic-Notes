##  一.String 类能不能被继承？
-  不可以，因为String类有final修饰符，而final修饰的类是不能被继承的，实现细节不允许改变。
## 关于final修饰符
- final类不能被继承，没有子类，final类中的方法默认是final的。
- final方法不能被子类的方法覆盖，但可以被继承。
- final成员变量表示常量，只能被赋值一次，赋值后值不再改变。
- final不能用于修饰构造方法。
- **注意**：父类的private成员方法是不能被子类方法覆盖的，因此private类型的方法默认是final类型的。
## 二.String 的不可变性
### 什么是不可变类
- 不可变类：所谓的不可变类是指这个类的实例一旦创建完成后，就不能改变其成员变量值。如JDK内部自带的很多不可变类：Interger、Long和String等。
- 可变类：相对于不可变类，可变类创建实例后可以改变其成员变量值，开发中创建的大部分类都属于可变类。
### 不可变类的设计方法
1. 类添加final修饰符，保证类不被继承。
1. 保证所有成员变量必须私有，并且加上final修饰。
1. 不提供改变成员变量的方法，包括setter
避免通过其他接口改变成员变量的值，破坏不可变特性。
1. 通过构造器初始化所有成员，进行深拷贝(deep copy)。
如果构造器传入的对象直接赋值给成员变量，还是可以通过对传入对象的修改进而导致改变内部变量的值。
5. 在getter方法中，不要直接返回对象本身，而是克隆对象，并返回对象的拷贝。
这种做法也是防止对象外泄，防止通过getter获得内部可变成员对象后对成员变量直接操作，导致成员变量发生改变。

### String对象的不可变性
string对象在内存创建后就不可改变，不可变对象的创建一般满足以上5个原则：
1. String类被final修饰，不可继承
1. string内部所有成员都设置为私有变量
1. 不存在value的setter，并将value和offset设置为final。
1. 当传入可变数组value[]时，进行copy而不是直接将value[]复制给内部变量.
1. 获取value时不是直接返回对象引用，而是通过Arrays.copyOf返回对象的copy.
这都符合上面总结的不变类型的特性，也保证了String类型是不可变的类。

###  String对象的不可变性的优缺点
#### 优点
1. 字符串常量池的需要.
- 字符串常量池可以将一些字符常量放在常量池中重复使用，避免每次都重新创建相同的对象、节省存储空间。
2. 线程安全考虑。
- 同一个字符串实例可以被多个线程共享。
3. 不可变性提供了安全性，因为类加载器要用到字符串，这样可以使得正确的类被加载。
4. 支持hash映射和缓存。
- 因为字符串是不可变的，所以在它创建的时候hashcode就被缓存了，不需要重新计算。

#### 缺点
如果有对String对象值改变的需求，那么会创建大量的String对象。

### String对象的是否真的不可变
虽然String对象将value设置为final,并且还通过各种机制保证其成员变量不可改变。但是还是可以通过反射机制的手段改变其值。例如：
```
/获取String类中的value字段
Field valueFieldOfString = String.class.getDeclaredField("value");
//改变value属性的访问权限
valueFieldOfString.setAccessible(true);
```


### Ref:
https://www.jianshu.com/p/4609c488b59e
